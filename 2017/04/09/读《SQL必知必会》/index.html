<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="读《SQL必知必会》">




  <meta name="keywords" content="阅读,数据库,">




  <link rel="alternate" href="/atom.xml" title="Ya">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x">



<link rel="canonical" href="http://blog.chenyalun.com/2017/04/09/读《SQL必知必会》/">


<meta name="description" content="关于SQLite数据库。">
<meta name="keywords" content="阅读,数据库">
<meta property="og:type" content="article">
<meta property="og:title" content="读《SQL必知必会》">
<meta property="og:url" content="http://blog.chenyalun.com/2017/04/09/读《SQL必知必会》/index.html">
<meta property="og:site_name" content="Ya">
<meta property="og:description" content="关于SQLite数据库。">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2019-08-21T03:38:40.442Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="读《SQL必知必会》">
<meta name="twitter:description" content="关于SQLite数据库。">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">





<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  



    <title> 读《SQL必知必会》 · Ya </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Ya</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags/阅读/">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Ya</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              时间线
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags/阅读/">
            
            
              阅读
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          读《SQL必知必会》
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017年4月9日
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、提要"><span class="toc-text">一、提要</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-语言"><span class="toc-text">1.语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-概念"><span class="toc-text">2.概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-类型"><span class="toc-text">3.类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-注释"><span class="toc-text">4.注释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-提示"><span class="toc-text">5.提示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-约束"><span class="toc-text">6.约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-范式"><span class="toc-text">7.范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-函数"><span class="toc-text">8.函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串处理"><span class="toc-text">字符串处理:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#日期时间处理"><span class="toc-text">日期时间处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数值处理函数"><span class="toc-text">数值处理函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#聚集函数"><span class="toc-text">聚集函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-视图"><span class="toc-text">9.视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-事务"><span class="toc-text">10.事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-索引"><span class="toc-text">11.索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-顺序"><span class="toc-text">12.顺序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、命令"><span class="toc-text">二、命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SELECT"><span class="toc-text">1.SELECT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ORDEY-BY"><span class="toc-text">2.ORDEY BY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-WHERE"><span class="toc-text">3.WHERE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-AND-OR"><span class="toc-text">4.AND OR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-IN"><span class="toc-text">5.IN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-NOT"><span class="toc-text">6.NOT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-LIKE"><span class="toc-text">7.LIKE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-拼接"><span class="toc-text">8.拼接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-GROUP-BY"><span class="toc-text">9.GROUP BY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-HAVING"><span class="toc-text">10.HAVING</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-ORDER-BY"><span class="toc-text">11.ORDER BY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-子查询"><span class="toc-text">12.子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-连接"><span class="toc-text">13.连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-UNION"><span class="toc-text">14.UNION</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-INSERT"><span class="toc-text">15.INSERT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-CREATE-AS"><span class="toc-text">16.CREATE AS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-UPDATE"><span class="toc-text">17.UPDATE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-DELETE"><span class="toc-text">18.DELETE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-CREATE"><span class="toc-text">19.CREATE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-ALTER"><span class="toc-text">20.ALTER</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-DROP"><span class="toc-text">21.DROP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-视图"><span class="toc-text">22.视图</span></a></li></ol></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p align="center"> 关于SQLite数据库。 </p>

<a id="more"></a>
<p>采用 SQLite 数据库。<br>所有命令都敲了一遍，没毛病。</p>
<h1 id="一、提要"><a href="#一、提要" class="headerlink" title="一、提要"></a>一、提要</h1><h2 id="1-语言"><a href="#1-语言" class="headerlink" title="1.语言"></a>1.语言</h2><ol>
<li><p>数据定义语言<br>CREATE 创建表/视图/其他对象<br>ALTER 修改对象<br>DROP 删除表/视图/其他对象</p>
</li>
<li><p>数据操纵语言<br>SELECT 检索数据<br>INSERT 创建记录<br>UPDATE 修改记录<br>DELETE 删除记录</p>
</li>
<li><p>数据控制语言<br>GRANT 赋予用户特权<br>REVOKE 收回用户特权</p>
</li>
</ol>
<h2 id="2-概念"><a href="#2-概念" class="headerlink" title="2.概念"></a>2.概念</h2><p>表：某种特定类型数据的结构化清单<br>字段：限定数据中的列(名)<br>记录：水平排列的数据的实体<br>列：表中的一个字段<br>模式：数据库和表的布局及特性<br>NULL值：表中以空白形式出现的值，表示没有设值<br>主键值：不重复，不为空，不能修改，不能重用</p>
<h2 id="3-类型"><a href="#3-类型" class="headerlink" title="3.类型"></a>3.类型</h2><p>SQLite无类型，在表声明中明确了字段类型，仍然可以在该字段中存储其它类型的数据。</p>
<p>NULL：表示该值为NULL值。<br>INTEGER： 无符号整型值。<br>REAL：浮点值。<br>TEXT：文本字符串，存储使用的编码方式为UTF-8、UTF-16BE、UTF-16LE。<br>BLOB：存储Blob数据，该类型数据和输入数据完全相同。<br>布尔数据类型：SQLite并没有提供专门的布尔存储类型，取而代之的是存储整型1表示true，0表示false。<br>日期和时间数据类型：以TEXT、REAL和INTEGER类型分别不同的格式表示该类型，如：<br><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">TEXT:</span> <span class="string">"YYYY-MM-DD HH:MM:SS.SSS"</span></span><br><span class="line"><span class="symbol">REAL:</span> 以Julian日期格式存储</span><br><span class="line"><span class="symbol">INTEGER:</span> 以Unix时间形式保存数据值，</span><br><span class="line">即从<span class="number">1970</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>到当前时间所流经的秒数。</span><br></pre></td></tr></table></figure></p>
<h2 id="4-注释"><a href="#4-注释" class="headerlink" title="4.注释"></a>4.注释</h2><ol>
<li>正行注释 <code># 注释内容</code></li>
<li>多行注释 <code>/* 注释内容  */</code></li>
<li>行尾注释 <code>--注释内容</code></li>
</ol>
<h2 id="5-提示"><a href="#5-提示" class="headerlink" title="5.提示"></a>5.提示</h2><ol>
<li>多条语句必须以分号分隔。</li>
<li>SQL语句不区分大小写。</li>
<li>空格会被忽略，可以写成多行。</li>
</ol>
<h2 id="6-约束"><a href="#6-约束" class="headerlink" title="6.约束"></a>6.约束</h2><ol>
<li><p>NOT NULL：非空约束，不能有NULL值。</p>
<figure class="highlight lasso"><table><tr><td class="code"><pre><span class="line">ID <span class="built_in">INTEGER</span> <span class="literal">NOT</span> <span class="built_in">NULL</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>DEFAULT：默认值，数据未指定的默认值，如默认时间:<code>date(&#39;now&#39;)</code>。</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">SALARY REAL<span class="built_in"> DEFAULT </span>5000.0</span><br><span class="line"> </span><br><span class="line">-- 删除默认约束</span><br><span class="line">-- 在SQLite中不可用</span><br><span class="line">ALTER TABLE t</span><br><span class="line">ALTER COLUMN SALARY DROP DEFAULT</span><br></pre></td></tr></table></figure>
</li>
<li><p>UNIQUE：唯一，列中所有数据各不相同。</p>
 <figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">AGE INTEGER UNIQUE</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>主键：唯一标识数据表中的记录，不为空。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">PRIMARY KEY(ID,name)</span><br><span class="line">   </span><br><span class="line"><span class="comment">-- 增加主键(前提列已经声明为非空)</span></span><br><span class="line"><span class="comment">-- 在SQLite中不可用</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span>(<span class="keyword">ID</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 删除主键</span></span><br><span class="line"><span class="comment">-- 在SQLite中不可用</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t <span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>外键：唯一标识其他表中的一条记录。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">FOREIGN KEY(name) REFERENCES q(name)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加外键</span></span><br><span class="line"><span class="comment">-- 在SQLite中不可用</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t</span><br><span class="line"><span class="keyword">ADD</span> FOREIGN <span class="keyword">KEY</span> (C_ID) <span class="keyword">REFERENCES</span> <span class="keyword">USER</span> (<span class="keyword">ID</span>)</span><br><span class="line"><span class="comment">-- 删除外键</span></span><br><span class="line"><span class="comment">-- 在SQLite中不可用</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t <span class="keyword">DROP</span> FOREIGN <span class="keyword">KEY</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>CHECK：保证列中所有值满足某一条件。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">AGE INT NOT NULL <span class="keyword">CHECK</span>(AGE&lt;=<span class="number">18</span>)</span><br><span class="line">         </span><br><span class="line">增加<span class="keyword">CHECK</span></span><br><span class="line"><span class="comment">-- 在SQLite中不可用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t</span><br><span class="line"><span class="keyword">MODIFY</span> AGE <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">CHECK</span>(AGE&gt;=<span class="number">18</span>)</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> checkConstraint <span class="keyword">CHECK</span>(AGE&gt;=<span class="number">18</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 删除CHECK</span></span><br><span class="line"><span class="comment">-- 在SQLite中不可用</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> checkConstraint</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="7-范式"><a href="#7-范式" class="headerlink" title="7.范式"></a>7.范式</h2><p>第一范式（1NF）：强调的是列的原子性，即列不能够再分成其他几列，如”地址”可以细分为：”省，市”。</p>
<p>第二范式（2NF）：首先是 1NF，其次一是表必须有一个主键；二是没有包含在主键中的列必须完全依赖于主键，而不能只依赖于主键的一部分。</p>
<p>第三范式（3NF）：首先是 2NF，其次非主键列必须直接依赖于主键，不能存在传递依赖。即不能存在：非主键列 A 依赖于非主键列 B，非主键列 B 依赖于主键的情况。</p>
<h2 id="8-函数"><a href="#8-函数" class="headerlink" title="8.函数"></a>8.函数</h2><blockquote>
<p>传送门：<br><a href="http://www.cnblogs.com/stephen-liu74/archive/2012/02/15/2322027.html" target="_blank" rel="noopener">http://www.cnblogs.com/stephen-liu74/archive/2012/02/15/2322027.html</a></p>
</blockquote>
<h3 id="字符串处理"><a href="#字符串处理" class="headerlink" title="字符串处理:"></a>字符串处理:</h3><p><code>UPPER()</code> ：大写转换<br><code>LENGTH()</code> ：字符串长度<br><code>LOWER()</code>：小写转换<br><code>LTRIM()</code> ：去掉字符串左边的空格<br><code>RTRIM()</code> ：去掉字符串右边的空格</p>
<h3 id="日期时间处理"><a href="#日期时间处理" class="headerlink" title="日期时间处理"></a>日期时间处理</h3><p><code>date(&#39;now&#39;)</code> 返回当前日期。</p>
<p><code>date(&#39;now&#39;,&#39;start of month&#39;,&#39;1 month&#39;,&#39;-1 day&#39;)</code>返回当前月的最后一天。</p>
<h3 id="数值处理函数"><a href="#数值处理函数" class="headerlink" title="数值处理函数"></a>数值处理函数</h3><p><code>ABS()</code> 绝对值<br><code>COS()</code> 角度的余弦<br><code>EXP()</code> 数的指数值<br><code>PI()</code> 返回圆周率<br><code>SIN()</code> 角度的正弦值<br><code>SQRT()</code> 平方根<br><code>TAN()</code> 角度的正切</p>
<h3 id="聚集函数"><a href="#聚集函数" class="headerlink" title="聚集函数"></a>聚集函数</h3><p><code>AVG()</code> 平均值，忽略<code>NULL</code>值。<br><code>COUNT()</code> 某列的行数，若指定列名则会忽略<code>NULL</code>值，而<code>COUNT(*)</code>对表中行的数目进行计数，无论是否为<code>NULL</code>都计数，<code>DISTINCT</code>不能用于<code>COUNT(*)</code>，如<code>COUNT(DISTINCT *)</code>为错误写法。</p>
<p><code>MAX()</code> 某列的最大值，忽略NULL值<br><code>MIN()</code> 某列的最小值，忽略NULL值<br><code>SUM()</code> 某列值的和，忽略NULL值</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>查看版本<br><figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">select</span> <span class="title">sqlite_version</span>(<span class="params"></span>)</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="9-视图"><a href="#9-视图" class="headerlink" title="9.视图"></a>9.视图</h2><p>视图只不过是通过相关的名称存储在数据库中的一个 SQLite 语句。视图实际上是一个以预定义的 SQLite 查询形式存在的表的组合。SQLite仅支持只读视图，所以视图可以创建，可以读，但其内容不能更改。</p>
<p>视图的作用:<br>视图是一种虚表，允许用户实现以下几点：</p>
<ul>
<li><p>用户或用户组查找结构数据的方式更自然或直观。</p>
</li>
<li><p>限制数据访问，用户只能看到有限的数据，而不是完整的表。</p>
</li>
<li><p>汇总各种表中的数据，用于生成报告。</p>
</li>
</ul>
<h2 id="10-事务"><a href="#10-事务" class="headerlink" title="10.事务"></a>10.事务</h2><p>事务是一个对数据库执行工作单元，是以逻辑顺序完成的工作单位或序列。事务是指一个或多个更改数据库的扩展。例如，如果正在创建一个记录或者更新一个记录或者从表中删除一个记录，那么正在该表上执行事务。重要的是要控制事务以确保数据的完整性和处理数据库错误。可以把许多的 SQLite 查询联合成一组，把所有这些放在一起作为事务的一部分进行执行。</p>
<p>事务具有以下四个标准属性，通常根据首字母缩写为 ACID：</p>
<ul>
<li><p>Atomicity（原子性）原子性是指事务是一个不可再分割的工作单位，事务中的操作要么都发生，要么都不发生。 </p>
</li>
<li><p>Consistency（一致性）一致性是指在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏。这是说数据库事务不能破坏关系数据的完整性以及业务逻辑上的一致性。 </p>
</li>
<li><p>Isolation（隔离性）多个事务并发访问时，事务之间是隔离的，一个事务不应该影响其它事务运行效果。</p>
</li>
<li><p>Durability（持久性）持久性，意味着在事务完成以后，该事务所对数据库所作的更改便持久的保存在数据库之中，并不会被回滚。</p>
</li>
</ul>
<p><strong>撤销</strong><br><code>ROLLBACK</code> 命令是用于撤消尚未保存到数据库的事务的事务命令。<br><code>ROLLBACK</code> 命令只能用于撤销自上次发出 <code>COMMIT</code> 或 <code>ROLLBACK</code> 命令以来的事务。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">ID</span> = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>
<p><strong>提交</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">ID</span> = <span class="number">5</span>;</span><br><span class="line"><span class="comment">-- 要做的事</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 或者使用以下语法</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">ID</span> = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>
<p><strong>注意：保存点在 SQLite (≥ 3.6.8)支持</strong><br>保留点越多越好。<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SAVEPOINT</span> delRow;  </span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> delRow;</span><br></pre></td></tr></table></figure></p>
<h2 id="11-索引"><a href="#11-索引" class="headerlink" title="11.索引"></a>11.索引</h2><p>索引是一种特殊的查找表，数据库搜索引擎用来加快数据检索，简单地说，<strong>索引是一个指向表中数据的指针</strong>。<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">创建索引</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> in_name_age <span class="keyword">ON</span> t(<span class="keyword">name</span>, age);</span><br><span class="line">    </span><br><span class="line">删除索引</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> in_name;</span><br></pre></td></tr></table></figure></p>
<h2 id="12-顺序"><a href="#12-顺序" class="headerlink" title="12.顺序"></a>12.顺序</h2><table>
<thead>
<tr>
<th>子句</th>
<th>说明</th>
<th>是否必须使用</th>
</tr>
</thead>
<tbody>
<tr>
<td>SELECT</td>
<td>返回列</td>
<td>是</td>
</tr>
<tr>
<td>FROM</td>
<td>检索的表</td>
<td>从表中选择数据时使用</td>
</tr>
<tr>
<td>WHERE</td>
<td>行级过滤</td>
<td>否</td>
</tr>
<tr>
<td>GROUP BY</td>
<td>分组</td>
<td>按组计算聚集时使用</td>
</tr>
<tr>
<td>HAVING</td>
<td>组级过滤</td>
<td>否</td>
</tr>
<tr>
<td>ORDER BY</td>
<td>输出排序</td>
<td>否</td>
</tr>
</tbody>
</table>
<p>妙记：</p>
<figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> kindID, COUNT<span class="comment">(*)</span></span><br><span class="line"><span class="comment">    FROM table</span></span><br><span class="line"><span class="comment">    WHERE PRICE &gt; 10</span></span><br><span class="line"><span class="comment">    GROUP BY kindID</span></span><br><span class="line"><span class="comment">    HAVING COUNT(*)</span> &gt;=<span class="number">2</span></span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> kindID;</span><br></pre></td></tr></table></figure>
<h1 id="二、命令"><a href="#二、命令" class="headerlink" title="二、命令"></a>二、命令</h1><h2 id="1-SELECT"><a href="#1-SELECT" class="headerlink" title="1.SELECT"></a>1.SELECT</h2><p>检索单个列<br><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line">-- <span class="keyword">SELECT</span> 列名 <span class="keyword">FROM</span> 表名</span><br><span class="line">    <span class="keyword">SELECT</span> age <span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure></p>
<p>检索多个列<br><figure class="highlight sqf"><table><tr><td class="code"><pre><span class="line"><span class="built_in">SELECT</span> <span class="built_in">name</span>, age, <span class="built_in">groupID</span> <span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure></p>
<p>检索所有列<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t;</span><br><span class="line"><span class="comment">-- 检索不必要的列会降低检索和应用程序的性能</span></span><br></pre></td></tr></table></figure></p>
<p>检索并返回不同的值<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">name</span>, age <span class="keyword">FROM</span> t;</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- DISTINCT作用于所有的列,如</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> groupID, age <span class="keyword">FROM</span> t;</span><br><span class="line"><span class="comment">-- 作用于groupID, age两列</span></span><br><span class="line"><span class="comment">-- 当groupID, age双双重复,只会返回一个结果</span></span><br></pre></td></tr></table></figure></p>
<p>限制结果<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 不超过5行</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">LIMIT</span> <span class="number">5</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 从第10行开始检索,不超过7行</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">LIMIT</span> <span class="number">5</span> <span class="keyword">OFFSET</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure></p>
<ol>
<li>LIMIT限制返回的行数，OFFSET指定从哪开始。</li>
<li>行数指的是索引行，即从第0行开始。</li>
</ol>
<h2 id="2-ORDEY-BY"><a href="#2-ORDEY-BY" class="headerlink" title="2.ORDEY BY"></a>2.ORDEY BY</h2><p>ORDEY BY子句要保证放到最后。</p>
<p>单个列排序<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 以age值的字母顺序/大小排列</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">name</span> <span class="keyword">FROM</span> t <span class="keyword">ORDER</span> <span class="keyword">BY</span> age;</span><br></pre></td></tr></table></figure></p>
<p>多个列排序<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 首先按照age,在age中按照name</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">ORDER</span> <span class="keyword">BY</span> age, <span class="keyword">name</span>;</span><br></pre></td></tr></table></figure></p>
<p>按列位置排序<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 首先按照age,在age中按照name</span></span><br><span class="line"><span class="comment">-- 3对应age, 1对应ID</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">3</span>, <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p>
<p>按降序排序<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- DESC 只作用在它前面的列</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">3</span> <span class="keyword">DESC</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="number">1</span> <span class="keyword">DESC</span>,<span class="number">3</span> <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-WHERE"><a href="#3-WHERE" class="headerlink" title="3.WHERE"></a>3.WHERE</h2><p>常用操作符:<br>一般：<code>=  !  =  &lt;  &gt;   &gt;=  &lt;=</code><br>介于之间：<code>BETWEEN AND</code><br>为空值：<code>IS NULL</code></p>
<p>一般使用<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age, <span class="keyword">name</span> <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">WHERE</span> age &lt; <span class="number">10</span>;</span><br><span class="line"><span class="comment">-- 单引号用来限定字符串</span></span><br><span class="line"><span class="comment">-- 将值与字符串类型的列比较需要限定引号</span></span><br><span class="line"><span class="comment">-- 将值与数值列进行比较不用引号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'张无忌'</span>;</span><br></pre></td></tr></table></figure></p>
<p>范围筛选<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">18</span> <span class="keyword">AND</span> <span class="number">22</span>;</span><br></pre></td></tr></table></figure></p>
<p>空值检查<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> sex <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="4-AND-OR"><a href="#4-AND-OR" class="headerlink" title="4.AND OR"></a>4.AND OR</h2><p>AND 优先级大于OR<br>组合使用注意加括号<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age = <span class="number">18</span> <span class="keyword">AND</span> <span class="keyword">name</span> = <span class="string">'唐僧'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age = <span class="number">18</span> <span class="keyword">OR</span> groupID = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p>
<p>组合使用<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> (age = <span class="number">18</span> <span class="keyword">OR</span> <span class="keyword">ID</span> &lt; <span class="number">12</span>) <span class="keyword">AND</span> groupID = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="5-IN"><a href="#5-IN" class="headerlink" title="5.IN"></a>5.IN</h2><p>关键字匹配</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 18,19岁</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age <span class="keyword">IN</span> (<span class="number">18</span>, <span class="number">19</span>);</span><br></pre></td></tr></table></figure>
<h2 id="6-NOT"><a href="#6-NOT" class="headerlink" title="6.NOT"></a>6.NOT</h2><p>否定其后的限定条件</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="number">18</span>, <span class="number">19</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">NOT</span> age &lt; <span class="number">22</span>;</span><br></pre></td></tr></table></figure>
<h2 id="7-LIKE"><a href="#7-LIKE" class="headerlink" title="7.LIKE"></a>7.LIKE</h2><p><code>%</code> 通配符<br>表示任何字符出现任意次数，不会匹配NULL。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'张%'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'%六'</span>;</span><br></pre></td></tr></table></figure>
<p><code>_</code>通配符<br>匹配单个字符，注意LIKE后的值使用字符串<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age <span class="keyword">LIKE</span> <span class="string">'2_'</span>;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意:SQLite 不支持[] 通配符</strong><br><del>[] 通配符<br>指定一系列的字符,只要满足这些字符其中之一,且位置出现在“[]”通配符的位置的字符串就满足查询条件</del><br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'[牛]%'</span>;</span><br><span class="line"><span class="comment">-- 否定</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, <span class="keyword">name</span>, age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'[^牛]%'</span>;</span><br></pre></td></tr></table></figure></p>
<p>注意：少使用通配符，尽量不要把通配符置于开始处</p>
<h2 id="8-拼接"><a href="#8-拼接" class="headerlink" title="8.拼接"></a>8.拼接</h2><p>使用 || 拼接多个列<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age || <span class="string">'('</span> || <span class="keyword">name</span> || <span class="string">')'</span> <span class="keyword">FROM</span> t;</span><br><span class="line"><span class="comment">-- 结果: 23(牛魔王)</span></span><br></pre></td></tr></table></figure></p>
<p>使用RTRIM去除填充列宽的文本值<br><figure class="highlight ruleslanguage"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age || <span class="string">'('</span> || <span class="keyword">RTRIM</span>(name) || <span class="string">')'</span> <span class="keyword">FROM</span> t;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">RTRIM</span>() 去掉字符串右边的空格</span><br><span class="line"><span class="keyword">LTRIM</span>() 去掉字符串左边的空格</span><br><span class="line"><span class="keyword">TRIM</span>() 去掉字符串左右两边的空格</span><br></pre></td></tr></table></figure></p>
<p>使用别名AS<br>  要求得到的是一列<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age || <span class="string">'('</span> || <span class="keyword">RTRIM</span>(<span class="keyword">name</span>) || <span class="string">')'</span>  <span class="keyword">AS</span> Results <span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure></p>
<p>执行计算<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age + <span class="number">3</span>, <span class="keyword">name</span>  <span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure></p>
<h2 id="9-GROUP-BY"><a href="#9-GROUP-BY" class="headerlink" title="9.GROUP BY"></a>9.GROUP BY</h2><p>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前<br><figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> groupID, COUNT<span class="comment">(*)  FROM t GROUP BY groupID;</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">含有COUNT(*)</span>的分组的结果不该包含每列独有的字段,如name,ID等,</span><br><span class="line">而应该是共性的字段,如分组ID等,因为目的是得知某组的COUNT</span><br><span class="line">*/</span><br><span class="line">    </span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> t <span class="keyword">GROUP</span> <span class="keyword">BY</span> name;</span><br></pre></td></tr></table></figure></p>
<h2 id="10-HAVING"><a href="#10-HAVING" class="headerlink" title="10.HAVING"></a>10.HAVING</h2><p>1.WHERE过滤行，而HAVING过滤分组，HAVING支持所有WHERE操作符。<br>2.WHERE在数据分组前进行过滤，HAVING在数据分组后进行过滤。</p>
<figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> groupID, COUNT<span class="comment">(*)  FROM t GROUP BY groupID HAVING COUNT(*)</span> &gt; <span class="number">5</span>;</span><br><span class="line">-- 筛选每组数量大于<span class="number">5</span></span><br></pre></td></tr></table></figure>
<h2 id="11-ORDER-BY"><a href="#11-ORDER-BY" class="headerlink" title="11.ORDER BY"></a>11.ORDER BY</h2><p>排序<br>HAVING常与GROUP BY连用<br><figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> groupID, COUNT<span class="comment">(*)  </span></span><br><span class="line"><span class="comment">FROM t </span></span><br><span class="line"><span class="comment">WHERE age &gt; 18  </span></span><br><span class="line"><span class="comment">GROUP BY groupID </span></span><br><span class="line"><span class="comment">HAVING COUNT(*)</span> &gt; <span class="number">2</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> groupID <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="12-子查询"><a href="#12-子查询" class="headerlink" title="12.子查询"></a>12.子查询</h2><p>在SELECT语句中，子查询总是从内向外处理。<br>作为子查询的SELECT语句只能查询单个列。企图检索多个列将返回错误。<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span>, age </span><br><span class="line"><span class="keyword">FROM</span> t </span><br><span class="line"><span class="keyword">WHERE</span> age <span class="keyword">IN</span> </span><br><span class="line">(<span class="keyword">SELECT</span> age <span class="keyword">FROM</span> t <span class="keyword">WHERE</span> age &gt; <span class="number">10</span> <span class="keyword">AND</span> sex <span class="keyword">IS</span> <span class="literal">NULL</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="13-连接"><a href="#13-连接" class="headerlink" title="13.连接"></a>13.连接</h2><p>内连接是据根据每个表共有的列的值匹配两个表中的行<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> t.name, age </span><br><span class="line"><span class="keyword">FROM</span> t </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> q </span><br><span class="line"><span class="keyword">ON</span> t.ID = q.ID;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">SELECT</span> t.name, t.age </span><br><span class="line"><span class="keyword">FROM</span> t, q </span><br><span class="line"><span class="keyword">WHERE</span> t.name = q.name; </span><br><span class="line"><span class="comment">-- 注意表的名称要匹配</span></span><br></pre></td></tr></table></figure></p>
<p>自连接，查询中需要的两个表实际上是相同的表<br><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.name, a.age </span><br><span class="line"><span class="keyword">FROM</span> t <span class="keyword">AS</span> a, t <span class="keyword">AS</span> b </span><br><span class="line"><span class="keyword">WHERE</span> a.name = b.name </span><br><span class="line"><span class="keyword">AND</span> b.ID = <span class="number">10</span>;</span><br></pre></td></tr></table></figure></p>
<p>外连接<br>1.外连接可以是左向外连接、右向外连接或完整外部连接<br>2.在使用OUTER JOIN语法时，必须使用RIGHT或LEFT关键字指定包括其所有行的表(RIGHT指出的是OUTER JOIN右边的表，而LEFT指出的是OUTER JOIN左边的表)。<br>3.左向外连接的结果集包括LEFT  OUTER子句中指定的左表的所有行，而不仅仅是连接列所匹配的行。<br>4.右向外连接是左向外连接的反向连接。将返回右表的所有行。如果右表的某行在左表中没有匹配行，则将为左表返回空值。   </p>
<p>SQLite支持左外连接LEFT OUTER JOIN，但不支持RIGHT OUTER JOIN 和 FULL OUTER JOIN语法。</p>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> t.*, q.*  </span><br><span class="line"><span class="keyword">FROM</span> t </span><br><span class="line"><span class="keyword">LEFt</span> <span class="keyword">JOIN</span> q </span><br><span class="line"><span class="keyword">ON</span> t.ID = q.ID;</span><br></pre></td></tr></table></figure>
<p>交叉连接。交叉连接返回左表中的所有行，左表中的每一行与右表中的所有行组合。交叉连接也称作笛卡尔积。 </p>
<p>总结:<br>左外连接显示左表所有行+匹配行<br>右外连接显示右表所有行+匹配行<br>完整外部连接显示左表和右表中的所有行<br>内连接显示根据比较运算符匹配两个表中的行<br>自连接需要的两个表实际上是相同的表<br>交叉连接显示左表所有行+左表每一行与右表所有行的组合<br>连接不匹配时显示空值</p>
<h2 id="14-UNION"><a href="#14-UNION" class="headerlink" title="14.UNION"></a>14.UNION</h2><p>将结果组合成一个结果集<br>1.UNION中的每个查询必须包含相同的列、表达式或聚集函数<br>2.UNION必须由两条或两条以上的SELECT语句组成，语句之间用关键字UNION分隔<br>3.列数据类型必须兼容</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span>, age </span><br><span class="line"><span class="keyword">FROM</span> t </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'张%'</span> </span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span>, age </span><br><span class="line"><span class="keyword">FROM</span> t </span><br><span class="line"><span class="keyword">WHERE</span> age &gt; <span class="number">22</span>;</span><br><span class="line"><span class="comment">-- 相当于 "并"在一起</span></span><br></pre></td></tr></table></figure>
<h2 id="15-INSERT"><a href="#15-INSERT" class="headerlink" title="15.INSERT"></a>15.INSERT</h2><p>插入记录<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t </span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">13</span>, </span><br><span class="line">    <span class="string">'白骨精'</span>, </span><br><span class="line">    <span class="string">'1543'</span>, </span><br><span class="line">    <span class="number">1</span>, </span><br><span class="line">    <span class="literal">NULL</span>, </span><br><span class="line">    <span class="number">19</span>, </span><br><span class="line">    <span class="number">1.68</span>);</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span></span><br><span class="line">t(<span class="keyword">ID</span>, <span class="keyword">name</span>, phone, groupID, sex, age, height) </span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">14</span>, <span class="string">'白龙马'</span>, <span class="string">'1323'</span>, <span class="number">0</span>, <span class="literal">NULL</span>, <span class="number">20</span>, <span class="number">1.69</span>);</span><br></pre></td></tr></table></figure></p>
<p>VALUES必须以其指定的次序匹配指定的列名，更推荐这种方式。<br>省略列：允许NULL或者有默认值</p>
<h2 id="16-CREATE-AS"><a href="#16-CREATE-AS" class="headerlink" title="16.CREATE AS"></a>16.CREATE AS</h2><p>复制表<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> c <span class="keyword">AS</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure></p>
<h2 id="17-UPDATE"><a href="#17-UPDATE" class="headerlink" title="17.UPDATE"></a>17.UPDATE</h2><p>更新行<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> t </span><br><span class="line"><span class="keyword">SET</span> height = <span class="number">1.66</span> </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'白龙马'</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 删除某列的值</span></span><br><span class="line"><span class="keyword">UPDATE</span> t </span><br><span class="line"><span class="keyword">SET</span> height = <span class="literal">NULL</span>  </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'韦小宝'</span>;</span><br></pre></td></tr></table></figure></p>
<p>更新多列，注意逗号<br><figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">UPDATE t </span><br><span class="line"><span class="keyword">SET</span> height <span class="comment">= 1.55,</span> </span><br><span class="line">phone <span class="comment">=</span> <span class="comment">'1888'</span><span class="comment">,</span> </span><br><span class="line">groupID <span class="comment">= 0</span>  </span><br><span class="line">WHERE <span class="comment">name =</span> <span class="comment">'唐僧'</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="18-DELETE"><a href="#18-DELETE" class="headerlink" title="18.DELETE"></a>18.DELETE</h2><p>删除行<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'白龙马'</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="19-CREATE"><a href="#19-CREATE" class="headerlink" title="19.CREATE"></a>19.CREATE</h2><p>创建表<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> d</span><br><span class="line">(</span><br><span class="line"><span class="keyword">ID</span> <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">TEXT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">sex <span class="built_in">INTEGER</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">height <span class="built_in">REAL</span> <span class="keyword">CHECK</span>(height &gt; <span class="number">0</span>),</span><br><span class="line">   </span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="string">'ID'</span>)</span><br><span class="line">FOREIGN <span class="keyword">KEY</span>(<span class="keyword">name</span>) <span class="keyword">REFERENCES</span> q(<span class="keyword">name</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>主键单独标明。</p>
<h2 id="20-ALTER"><a href="#20-ALTER" class="headerlink" title="20.ALTER"></a>20.ALTER</h2><p>给表增加一列</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> b</span><br><span class="line"><span class="keyword">ADD</span> place <span class="built_in">TEXT</span>;</span><br></pre></td></tr></table></figure>
<p>重命名表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> b</span><br><span class="line"><span class="keyword">RENAME</span> <span class="keyword">TO</span> bbb;</span><br></pre></td></tr></table></figure>
<p>在 SQLite 中，除了重命名表和在已有的表中添加列，ALTER TABLE 命令不支持其他操作,包括删除列,定义主键和外键等.</p>
<p>SQLite不支持删除列</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t </span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">COLUMN</span> vend_phone;</span><br></pre></td></tr></table></figure>
<h2 id="21-DROP"><a href="#21-DROP" class="headerlink" title="21.DROP"></a>21.DROP</h2><p>删除表<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> t;</span><br></pre></td></tr></table></figure></p>
<h2 id="22-视图"><a href="#22-视图" class="headerlink" title="22.视图"></a>22.视图</h2><p>创建视图<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_b </span><br><span class="line"><span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span>, age <span class="keyword">FROM</span> t;</span><br></pre></td></tr></table></figure></p>
<p>查看视图</p>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> view_b;</span><br></pre></td></tr></table></figure>
<p>删除视图<br><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> view_b;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>参考感谢：<br><a href="http://zhiwei.li/text/2010/08/23/sqlite%E5%A4%96%E9%94%AE/" target="_blank" rel="noopener">SQLite外键</a><br><a href="http://www.cnblogs.com/stephen-liu74/archive/2012/02/22/2325258.html" target="_blank" rel="noopener">SQLite学习手册</a><br><a href="http://www.runoob.com/sqlite/sqlite-syntax.html" target="_blank" rel="noopener">SQLite 语法</a></p>
</blockquote>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/阅读/">阅读</a>
            
              <a href="/tags/数据库/">数据库</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/04/13/读《Objective-C高级编程》/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">读《Objective-C高级编程》</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2017/04/05/读《Effective Objective-C 2.0》/">
        <span class="next-text nav-default">读《Effective Objective-C 2.0》</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/ChenYalun" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="https://weibo.com/icqk" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
    
      
    
      
        
          <a href="https://stackoverflow.com/users/7026915/allen" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
        
      
    
    
    
  </div>


<div class="copyright">
  <span class="power-by">
    May Be 
  </span>
  
  <span class="theme-info">
    Better  
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even"> </a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2014 - 
    
    2020

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Ya</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  
  <script>
    var cloudTieConfig = {
      url: document.location.href, 
      sourceId: "",
      productKey: "f132359147224247aa1c3ad32d20490b",
      target: "cloud-tie-wrapper"
    };
  </script>
  <script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>





    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  </body>
</html>
